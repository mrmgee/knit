<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kneedle Cache</title>
<!--    <link rel="stylesheet" href="styles.css"> -->
    <style>
body {
    font-family: sans-serif;
    margin: 20px;
    background-color: #f4f4f4;
}

.container {
    max-width: 600px;
    margin: auto;
    background: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
}

form {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-bottom: 20px;
}

input, select, button {
    padding: 10px;
    border-radius: 4px;
    border: 1px solid #ccc;
}

button {
    background-color: #5c67f2;
    color: white;
    border: none;
    cursor: pointer;
}

button:hover {
    background-color: #4a54e1;
}

.sort-controls {
    margin-bottom: 20px;
}

.needle-item {
    background: #e9e9e9;
    margin-bottom: 10px;
    padding: 10px;
    border-radius: 4px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.delete-btn {
    background-color: #e74c3c;
    color: white;
    border: none;
    padding: 5px 10px;
    cursor: pointer;
}

    </style>
</head>
<body>
    <div class="container">
        <h1>Kneedle Cache</h1>

        <!-- Add Needle Form with Dropdowns -->
        <form id="needleForm">
            <label for="type">Type:</label>
            <select id="type" required>
                <option value="">--Select Type--</option>
                <option value="Straight">Straight</option>
                <option value="Circular">Circular</option>
                <option value="Double Pointed">Double Pointed</option>
                <option value="Other">Other</option>
            </select>

            <label for="material">Material:</label>
            <select id="material" required>
                <option value="">--Select Material--</option>
                <option value="Aluminum">Aluminum</option>
                <option value="Steel">Steel</option>
                <option value="Metal">Metal</option>
                <option value="Plastic">Plastic</option>
                <option value="Wood">Wood</option>
                <option value="Bamboo">Bamboo</option>
                <option value="Carbon Fiber">Carbon Fiber</option>
                <option value="Other">Other</option>
            </select>



<label for="sizesel">Size:</label>
<select id="sizesel" required>
                <option value="">--Select size --</option>
                <!--
                <option value="xx">(xx mm)</option>
                -->
                <option value="000 (1.50 mm)">000 (1.50 mm)</option>
                <option value="00 (1.75 mm)">00 (1.75 mm)</option>
                <option value="0 (2.00 mm)">0 (2.00 mm)</option>
                <option value="1 (2.25 mm)">1 (2.25 mm)</option>
                <option value="1.5 (2.50 mm)">1.5 (2.50 mm)</option>
                <option value="2 (2.75 mm)">2 (2.75 mm)</option>
                <option value="2.5 (3.00 mm)">2.5 (3.00 mm)</option>
                <option value="3 (3.25 mm)">3 (3.25 mm)</option>
                <option value="4 (3.50 mm)">4 (3.50 mm)</option>

                <option value="5 (3.75 mm)">5 (3.75 mm)</option>
                <option value="6 (4.00 mm)">6 (4.00 mm)</option>
                <option value="7 (4.50 mm)">7 (4.50 mm)</option>
                <option value="8 (5.00 mm)">8 (5.00 mm)</option>
                <option value="9 (5.50 mm)">9 (5.50 mm)</option>
                <option value="10 (6.00 mm)">10 (6.00 mm)</option>
                <option value="10.5 (6.50 mm)">10.5 (6.50 mm)</option>
                <option value="11 (8.00 mm)">11 (8.00 mm)</option>
                <option value="13 (9.00 mm)">13 (9.00 mm)</option>
                <option value="15 (10.00 mm)">15 (10.00 mm)</option>
                <option value="17 (12.00 mm)">17 (12.00 mm)</option>
                <option value="19 (15.00 mm)">19 (15.00 mm)</option>
                <option value="35 (19.00 mm)">35 (19.00 mm)</option>
                <option value="36 (20.00 mm)">36 (20.00 mm)</option>
                <option value="50 (25.00 mm)">50 (25.00 mm)</option>


            </select>


<!--
            <label for="sizeUS">Size (US):</label>
            <input type="text" id="sizeUS">
-->

            <label for="length">Length:</label>
            <select id="length" required>
                <option value="">--Select length --</option>
                
                <option value="6 in">6 in</option>
                <option value="7 in">7 in</option>
                <option value="8 in">8 in</option>
                <option value="9 in">9 in</option>
                <option value="10 in">10 in</option>
                <option value="11 in">11 in</option>
                <option value="12 in">12 in</option>
                <option value="13 in">13 in</option>
                <option value="14 in">14 in</option>
                <option value="15 in">15 in</option>
                <option value="16 in">16 in</option>

            </select>




            <button type="submit">Add Needle</button>
        </form>

        <!-- Sorting Controls -->
        <div class="sort-controls">
            <label for="sortKey">Sort by:</label>
            <select id="sortKey" onchange="displayNeedles()">
                <option value="sizesel">Size</option>
                <option value="type">Type</option>
                <option value="material">Material</option>
            </select>
        </div>

        <!-- Needle List Display -->
        <h2>My Needles</h2>
        <div id="needleList">
            <!-- Needles will be dynamically added here -->
        </div>
    </div>

<!--    <script src="script.js"></script> -->

    <script>

        document.addEventListener('DOMContentLoaded', (event) => {
            displayNeedles();
        });
        
        document.getElementById('needleForm').addEventListener('submit', function(e) {
            e.preventDefault();
            addNeedle();
        });
        
        function getNeedles() {
            let needles = localStorage.getItem('knittingNeedles');
            return needles ? JSON.parse(needles) : [];
        }
        
        function saveNeedles(needles) {
            localStorage.setItem('knittingNeedles', JSON.stringify(needles));
        }
        
        function addNeedle() {
            // Get values from dropdowns and inputs
            const type = document.getElementById('type').value;
            const material = document.getElementById('material').value;
            const sizesel = document.getElementById('sizesel').value;
        
            const length = document.getElementById('length').value;
        
        
            if (!type || !material || !sizesel || !length ) {
                alert("Please select Type, Material, Size and Length.");
                return;
            }
        
        
        
        
            const newNeedle = {
                id: Date.now(), // Unique ID
                type,
                material,
                sizesel,
                length
            };
        
            const needles = getNeedles();
            needles.push(newNeedle);
            saveNeedles(needles);
            displayNeedles();
            document.getElementById('needleForm').reset();
            document.getElementById('type').value = ''; // Reset select to default
            document.getElementById('material').value = ''; // Reset select to default
        }
        
        function displayNeedles() {
            const needles = getNeedles();
            const sortKey = document.getElementById('sortKey').value;
        
            // Sort the needles based on the selected key
            needles.sort((a, b) => {
                if (sortKey === 'sizesel') {
                    return a.sizesel - b.sizesel; // Numeric sort
                } else {
                    return a[sortKey].localeCompare(b[sortKey]); // Alphabetical sort
                }
            });
        
            const needleList = document.getElementById('needleList');
            needleList.innerHTML = ''; // Clear current list
            let lastCategory = null;
        
            needles.forEach(needle => {

                if (sortKey === 'sizesel') {
                    sortCurrent = needle.sizesel;
                } else if (sortKey === 'type') {
                    sortCurrent = needle.type;
                } else {
                    sortCurrent = needle.material;
                }

                // Check if the category has changed
                if (sortCurrent !== lastCategory) {
                    lastCategory = sortCurrent;

                    // Append the actual item content
                    let sortMat = document.createElement('h4');  // Sort param header
                    sortMat.innerHTML = `<i> ${sortCurrent} </i> `;
                    needleList.appendChild(sortMat);
                }

                const needleItem = document.createElement('div');
                needleItem.classList.add('needle-item');
                needleItem.innerHTML = `
                    <span> ${needle.sizesel} </span> |
                    <span> ${needle.type}</span> |
                    <span> ${needle.material}</span> |
                    <span> ${needle.length}</span>
                    <button class="delete-btn" onclick="deleteNeedle(${needle.id})">Delete</button>
                `;
                needleList.appendChild(needleItem);
            });
        }
        
        function deleteNeedle(id) {
            let needles = getNeedles();
            needles = needles.filter(needle => needle.id !== id);
            saveNeedles(needles);
            displayNeedles(); // Re-render the list
        }        

    </script>
</body>
</html>
